{% extends 'base.html' %}

{% block start %}
<div class="container my-5">
    <h2 class="text-center mb-5">Edit Questions for Exam</h2>
    <form method="POST" class="form-container shadow-sm p-4 bg-light rounded">
        {% csrf_token %}
        
        {% for question in questions %}
        <div class="question-card card border-0 shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Question {{ forloop.counter }}</h5>
            </div>
            <div class="card-body">
                <!-- Question Text -->
                <div class="form-group mb-4">
                    <label for="question_{{ forloop.counter }}" class="form-label fw-bold">Question Text</label>
                    <textarea id="question_{{ forloop.counter }}" name="question_{{ forloop.counter }}" class="form-control" rows="3" placeholder="Enter the question text here..." required>{{ question.question_text|default:'' }}</textarea>
                </div>

                <!-- Options -->
                <div class="form-group mb-4">
                    <label class="form-label fw-bold">Options</label>
                    <div class="input-group mb-2">
                        <span class="input-group-text bg-secondary text-white">A</span>
                        <input type="text" name="option_{{ forloop.counter }}_A" class="form-control" placeholder="Option A" value="{{ question.options.A|default:'' }}" required>
                    </div>
                    <div class="input-group mb-2">
                        <span class="input-group-text bg-secondary text-white">B</span>
                        <input type="text" name="option_{{ forloop.counter }}_B" class="form-control" placeholder="Option B" value="{{ question.options.B|default:'' }}" required>
                    </div>
                    <div class="input-group mb-2">
                        <span class="input-group-text bg-secondary text-white">C</span>
                        <input type="text" name="option_{{ forloop.counter }}_C" class="form-control" placeholder="Option C" value="{{ question.options.C|default:'' }}" required>
                    </div>
                    <div class="input-group mb-2">
                        <span class="input-group-text bg-secondary text-white">D</span>
                        <input type="text" name="option_{{ forloop.counter }}_D" class="form-control" placeholder="Option D" value="{{ question.options.D|default:'' }}" required>
                    </div>
                </div>

                <!-- Correct Option -->
                <div class="form-group">
                    <label for="correct_option_{{ forloop.counter }}" class="form-label fw-bold">Correct Option</label>
                    <select id="correct_option_{{ forloop.counter }}" name="correct_option_{{ forloop.counter }}" class="form-select" required>
                        <option value="" disabled selected>Select the correct answer</option>
                        <option value="A" {% if question.correct_option == 'A' %}selected{% endif %}>A</option>
                        <option value="B" {% if question.correct_option == 'B' %}selected{% endif %}>B</option>
                        <option value="C" {% if question.correct_option == 'C' %}selected{% endif %}>C</option>
                        <option value="D" {% if question.correct_option == 'D' %}selected{% endif %}>D</option>
                    </select>
                </div>
            </div>
        </div>
        {% endfor %}

        <!-- Submit Button -->
        <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary btn-lg">Save All Questions</button>
        </div>
    </form>
</div>
{% endblock %}
