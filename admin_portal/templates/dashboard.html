{% load static %}
<!DOCTYPE html>
<html lang="en"> <!--final with animation--> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        h2, h3{
            font-weight: 1;
        }
        body {
            display: flex;
            flex-direction: column;
        }

        a .home-image {
            width: 40% !important;
            height: auto !important;
            border-radius: 15px !important;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2) !important;
        }
        

        .header {   
            display: flex;
            justify-content: flex-end;
            height: 60px;
            align-items: center;
            background: white;
            color: #085889;
            padding: 15px 20px;
        }
        .content > h3 {
            margin-bottom: 5px;
        }
        .dropdown {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        .profile-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            object-fit: cover;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            color: black;
            min-width: 120px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
            right: 0;
            top: 100%;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .dropdown-content a {
            color: black;
            padding: 10px;
            display: flex;
            align-items: center;
            text-decoration: none;
            gap: 8px;
        }
        .dropdown-content a:hover {
            background-color: #64B5F6;
            border-radius: 5px;
            color: white;
        }
        .dropdown-content a:hover .material-icons {
            color: white;
        }
   
    


        .sidebar {
            width: 210px;
            background: #077BC3;;
            color: white;
            height: 100vh;
            padding: 0px;
            border-top-right-radius: 8px;
            border-bottom-right-radius: 20px;
        }

        .sidebar-header {
            display: flex;
            align-items:center;
            gap: 10px;
            margin-bottom: 20px;
            margin-top: 10px;
            margin-left: 10px;
        }

        .sidebar ul {
            list-style: none;
        }
        
        .sidebar ul li{
            width: 100%;
            padding-left: 20px;
            padding-right: 30px;
            padding-top: 10px;
            padding-bottom: 10px;
            cursor: pointer;
            position: relative;
            transition: background-color 0.3s ease;

        }
         .dropdown-menu li {
            width: 100%;
            padding: 10px;
            cursor: pointer;
            position: relative;
            transition: background-color 0.3s ease;
        }
        .sidebar ul li:hover{
            background-color: #4cb2f2;
            width: 100%;
            border-radius: 0;

        } .dropdown-menu li:hover {
            background-color: #177dbb;
            width: 100%;
            border-radius: 0;
        }

        {% comment %} Hidden dropdown menus  {% endcomment %}
        .dropdown-menu {
            display: none;
            list-style: none;
            padding-left: 30px;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            justify-content: first baseline;
        }

        .content {
            flex: 1;
            background: #e9f0f6;
            padding: 20px;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .card {
            background: white;
            padding-top: 10px;
            padding-bottom:15px ;
            padding-left: 10px;
            border-radius: 10px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
            text-align: left;
            transition: transform 0.3s, box-shadow 0.3s;           

        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0px 8px 15px rgba(37, 83, 181, 0.2);
        }

        .card:nth-child(4n+1) { border-bottom: 5px solid #C7FCEC; }
        .card:nth-child(4n+2) { border-bottom: 5px solid #FDF0C6; }
        .card:nth-child(4n+3) { border-bottom: 5px solid #FED8F1; }
        .card:nth-child(4n+4) { border-bottom: 5px solid #BCEBFF; }
        
        .menu-icon {
            margin-right: 5px; /* Reduce space between icon and text */
        }
        
        .dropdown-icon {
            margin-left: auto; /* Push dropdown icon to the right */
        }
        .card p {
          color: rgb(48, 47, 47);
            font-size: large;
        }
        h6{
            font-size: small;
            padding-bottom: 10px;
            color: #949292;;
        }
        .hidden {
            display: none;
        }
        .show{
            display: block;
        }
        .hover_sidebar_color{
            background-color: #4cb2f2;
        }

        .container {
        max-width: 1000px;
        margin: auto;
        background: white;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
      }

      

      h2 {
        color: #333;
      }

      .add-button {
        background-color: #4CAF50;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin-left: auto;
        margin-bottom: 20px;
      }

      .add-button:hover {
        background-color: #45a049;
      }

      .back-link {
        display: block;
        margin-bottom: 20px;
        color: #007bff;
        text-decoration: none;
        font-weight: bold;
      }

      .back-link:hover {
        text-decoration: underline;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th,
      td {
        padding: 12px;
        text-align: left;
      }

      th {
        background-color: #ffffff;
        color: black;
      }

      tr:nth-child(even) {
        background-color: rgb(224, 233, 244);
      }

      .action-buttons a {
        margin-right: 10px;
        color: white;
        border-radius: 4px;
        text-decoration: none;
        font-size: 16px;
      }

      .edit-icon::before {
        content: '\270E';
        /* Pencil icon */
        font-size: 30px;
        font-weight: bold;
        color: #000;
      }

      .delete-icon::before {
        content: '\1F5D1';
        /* Trash can icon */
        font-size: 30px;
        font-weight: bold;
        color: #f44336;
      }

      .action-buttons a:hover {
        opacity: 0.8;
      }
      .title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            position: absolute;
            top: -40px;
            left: 0;
            color: gray;
        }
        .form-row {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
        }
        .input-group {
            flex: 1;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        input {
            width: 70%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        
        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .save-btn, .continue-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .save-btn {
            background-color: green;
            color: white;
        }
        .continue-btn {
            background-color: blue;
            color: white;
        }
        
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        .actions {
            display: flex;
            gap: 10px;
        }
        .edit, .delete {
            cursor: pointer;
            padding: 5px 10px;
            border: none;
            color: white;
            border-radius: 4px;
        }
        .edit { background-color: #4CAF50; }
        .delete { background-color: #f44336; }
        .bottom-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
        }
        .bottom-actions button {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            margin-left: 10px;
        }
        .accept { background-color: #008CBA; }
        .delete-selected { background-color: #f44336; }
    </style>
     
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
<!--header section-->
    <div class="header">
        <a href ='#' ><img src = {% static 'images/home.png' %} class='home-image'></a>
        <div class="dropdown">
            
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 0C7.2 0 0 7.2 0 16C0 24.8 7.2 32 16 32C24.8 32 32 24.8 32 16C32 7.2 24.8 0 16 0ZM16 6.22222C17.9556 6.22222 19.5556 7.82222 19.5556 9.77778C19.5556 11.7333 17.9556 13.3333 16 13.3333C14.0444 13.3333 12.4444 11.7333 12.4444 9.77778C12.4444 7.82222 14.0444 6.22222 16 6.22222ZM7.11111 24.8889C7.11111 20 11.1111 16 16 16C20.8889 16 24.8889 20 24.8889 24.8889H7.11111Z" fill="#085889"/>
            </svg> 
            <span>{{ request.user.username }}</span>
            <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
            <div class="dropdown-content">
                <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
                <a href="#"><span class="material-icons">edit</span> Edit</a>
                <a href="#"><span class="material-icons">logout</span> Logout</a>
            </div>
        </div>
    </div>

    <div style="display: flex;">
        <!--side bar section-->
        <div class="sidebar">
            <div class="sidebar-header">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16 0C7.2 0 0 7.2 0 16C0 24.8 7.2 32 16 32C24.8 32 32 24.8 32 16C32 7.2 24.8 0 16 0ZM16 6.22222C17.9556 6.22222 19.5556 7.82222 19.5556 9.77778C19.5556 11.7333 17.9556 13.3333 16 13.3333C14.0444 13.3333 12.4444 11.7333 12.4444 9.77778C12.4444 7.82222 14.0444 6.22222 16 6.22222ZM7.11111 24.8889C7.11111 20 11.1111 16 16 16C20.8889 16 24.8889 20 24.8889 24.8889H7.11111Z" fill="white"/>
                    </svg>
                <h3>Super Admin</h3>
            </div>
            <ul>
                
                <li onclick="setActive(this)" data-page-name="dashboard"><span class="fas fa-tachometer-alt"></span> 
                    &nbsp;&nbsp;&nbsp;Dashboard</li>

                <!-- Request Dropdown -->                
                <li onclick="setActive(this)" data-page-name="request_menu"><span class="fas fa-briefcase"></span>
                    &nbsp;&nbsp;&nbsp;Certificate Req.</li>


                <!-- Admin Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('admin-menu', this)"><span class="fas fa-users"></span>&nbsp;&nbsp;&nbsp; 
                    Admin <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="admin-menu">
                    <li onclick="setActive(this)" data-page-name="manage_admin">Manage Admin</li>
                    <li onclick="setActive(this)" data-page-name="add_admin">Add Admin</li>
                </ul>
                 
                <!-- Manager Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('manager-menu', this)"><span class="fas fa-briefcase"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Manager <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="manager-menu">
                    <li onclick="setActive(this)" data-page-name="manage_manager">Manage Manager </li>
                    <li onclick="setActive(this)" data-page-name="add_manager">Add Manager</li>
                </ul>

                <!-- Employee Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('employee-menu', this)"><span class="fas fa-user-tie"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Employee <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="employee-menu">
                    <li onclick="setActive(this)" data-page-name="manage_employee">Manage Employee</li>
                    <li onclick="setActive(this)"  data-page-name="add_employee">Add Employee </li>
                </ul>

                <!-- Users Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('users-menu', this)"><span class="fas fa-user-circle"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Users <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="users-menu">
                    <li onclick="setActive(this)" data-page-name="manage_user"> Manage User</li>
                    <li onclick="setActive(this)"  data-page-name="add_user">Add User</li>
                </ul>

                <!-- Sales Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('sales-menu', this)"><span class="fas fa-user-circle"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Sales <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="sales-menu">
                    <li onclick="setActive(this)" data-page-name="sales_overview"> Sales Overview</li>
                    <li onclick="setActive(this)" data-page-name="manage_sales">Manage Sales</li>
                </ul>
                <!-- Student Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('student-menu', this)"><span class="fas fa-user-circle"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Students <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="student-menu">
                    <li onclick="setActive(this)" data-page-name="manage_student"> Manage Student</li>
                    <li onclick="setActive(this)" data-page-name="add_student">Add Student</li>
                </ul>
                <!-- Colleges Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('colleges-menu', this)"><span class="fas fa-user-circle"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Colleges <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="colleges-menu">
                    <li onclick="setActive(this)" data-page-name="manage_college">Manage Colleges</li>
                    <li onclick="setActive(this)" data-page-name="add_college">Add Colleges</li>
                </ul>
                <!-- Question Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('question-menu', this)"><span class="fas fa-user-circle"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Question <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
                <ul class="dropdown-menu" id="question-menu">
                  <li onclick="setActive(this)" data-page-name="manage_question">Manage Question</li>
                  <li onclick="setActive(this)" data-page-name="add_question"> Add Questions</li>
                   </ul>
                        <!-- Result Dropdown -->
                <li class="dropdown-toggle" onclick="toggleDropdown('Result-menu', this)"><span class="fas fa-user-circle"></span> 
                    &nbsp;&nbsp;&nbsp;
                    Result <span class="dropdown-icon"><i class="fas fa-chevron-down icon_toggle"></i></span>
                </li>
            </ul>
        </div>
        <!--content current page of sidebar dashboard-->
        <div class="content current_page_action " data-page-name="dashboard">
            <h3>&nbsp;Dashboard</h3>
            <div class="dashboard-cards">
                <!-- Super Admins -->
                <div class="card" data-page-name="super_admins">
                    <h6>Total Super Admins</h6>
                    <p>{{ total_super_admins }}</p>
                </div>

                <!-- Admins -->
                <div class="card" data-page-name="admins">
                    <h6>Total Admins</h6>
                    <p>{{ total_admins }}</p>
                </div>

                <!-- Managers -->
                <div class="card" data-page-name="managers">
                    <h6>Total Managers</h6>
                    <p>{{ total_managers }}</p>
                </div>

                <!-- Employees -->
                <div class="card" data-page-name="employees">
                    <h6>Total Employees</h6>
                    <p>{{ total_employees }}</p>
                </div>

                <!-- Students -->
                <div class="card" data-page-name="students">
                    <h6>Total Students</h6>
                    <p>{{ total_students }}</p>
                </div>

                <!-- Users -->
                <div class="card" data-page-name="users">
                    <h6>Total Users</h6>
                    <p>{{ total_users }}</p>
                </div>

                <!-- Active Users -->
                <div class="card" data-page-name="active_users">
                    <h6>Active Users</h6>
                    <p>{{ active_users }}</p>
                </div>

                <!-- Premium Users -->
                <div class="card" data-page-name="premium_users">
                    <h6>Premium Users</h6>
                    <p>{{ premium_users }}</p>
                </div>

                <!-- Colleges -->
                <div class="card" data-page-name="colleges">
                    <h6>Total Colleges</h6>
                    <p>{{ total_colleges }}</p>
                </div>

                <!-- Questions -->
                <div class="card" data-page-name="questions">
                    <h6>Total Questions</h6>
                    <p>{{ total_questions }}</p>
                </div>

                <!-- Subjects -->
                <div class="card" data-page-name="subjects">
                    <h6>Total Subjects</h6>
                    <p>{{ total_subjects }}</p>
                </div>

                <!-- Categories -->
                <div class="card" data-page-name="categories">
                    <h6>Total Categories</h6>
                    <p>{{ total_categories }}</p>
                </div>

                <!-- Sales -->
                <div class="card" data-page-name="total_sales">
                    <h6>Total Sales</h6>
                    <p>{{ total_sales }}</p>
                </div>

                <div class="card" data-page-name="yearly_sales">
                    <h6>Yearly Sales</h6>
                    <p>{{ yearly_sales }}</p>
                </div>

                <div class="card" data-page-name="monthly_sales">
                    <h6>Monthly Sales</h6>
                    <p>{{ monthly_sales }}</p>
                </div>

                <div class="card" data-page-name="weekly_sales">
                    <h6>Weekly Sales</h6>
                    <p>{{ weekly_sales }}</p>
                </div>

                <div class="card" data-page-name="daily_sales">
                    <h6>Daily Sales</h6>
                    <p>{{ daily_sales }}</p>
                </div>
            </div>
        </div>
        
        <!-- manage certificate requests -->
        <div class="content current_page_action hidden" data-page-name="request_menu">
            <h3>&nbsp;Certificates/Manage Certificate Requests</h3>
            <div class="container">
                <form method="POST" action="{% url 'update_certificate_status' %}">
                    {% csrf_token %}
                    <div class="header">
                        <select name="certificate_status_action" id="certificate_status_action">
                            <option value="">Select Action</option>
                            <option value="approve">Approve</option>
                            <option value="reject">Reject</option>
                        </select>
                        <button type="submit">Apply</button>
                    </div>

                    <!-- Table to Show Certificate Requests -->
                    <table>
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="select_all" onclick="toggleSelectAll()"></th>
                                <th>Name</th>
                                <th>Certificate For</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for certificate in certificates %}
                            <tr>
                                <td><input type="checkbox" name="selected_certificates" class="select_certificate" value="{{ certificate.id }}"></td>
                                <td>{{ certificate.name }}</td>
                                <td>{{ certificate.certified_for }}</td>
                                <td>{{ certificate.status }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </form>
            </div>
        </div>
        
        <!-- Manage Admin -->
        <div class="content current_page_action hidden" data-page-name="manage_admin">
            <h3>&nbsp;Admin / Manage Admin</h3>

            <div class="container">
                <div class="header">
                    <input type="text" id="search-admin" placeholder="Search by Name or Email..." onkeyup="filterAdmins()">
                    <button class="add-button" data-page-name="add_admin" onclick="setActive(this)">Add +</button>
                </div>

                <!-- Table to Show Existing Admins -->
                <table id="admin-table">
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>User Name</th>
                            <th class="admin-name">Full Name</th>
                            <th class="admin-email">Email</th>
                            <th>Phone No.</th>
                            <th>Alt. Phone No.</th>
                            <th>Password</th>
                            <th>Aadhar No.</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for admin in admins %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ admin.username }}</td>
                            <td class="admin-name">{{ admin.full_name }}</td>
                            <td class="admin-email">{{ admin.email }}</td>
                            <td>{{ admin.phone_number }}</td>
                            <td>{{ admin.alt_phone_number }}</td>
                            <td>{{ admin.password }}</td>
                            <td>{{ admin.aadhar_number }}</td>
                            <td>
                                <button class="edit-btn" onclick="editAdmin({{ admin.id }}, '{{ admin.full_name|escapejs }}', '{{ admin.email|escapejs }}', '{{ admin.phone_number|escapejs }}', '{{ admin.alt_phone_number|escapejs }}', '{{ admin.password|escapejs }}', '{{ admin.aadhar_number|escapejs }}')">Edit</button>
                                <form method="POST" action="{% url 'delete_admin' admin.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this admin?')">Delete</button>
                                </form>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="9" style="text-align: center;">No admins found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    <!-- Add/Edit Admin Section -->
    <div class="content current_page_action hidden" data-page-name="add_admin">
        <h3>&nbsp;Admin/Add Admin</h3>
        <div class="container">
            <div class="title">Manage Admin</div>
            <form method="POST" action="{% url 'add_admin' %}">
                {% csrf_token %}
                <input type="hidden" name="admin_id" id="admin_id">
                <div class="form-row">
                    <div class="input-group">
                        <label for="full_name">Full Name</label>
                        <input type="text" name="full_name" id="full_name" placeholder="Enter Full Name" required>
                    </div>
                    <div class="input-group">
                        <label for="email">Email</label>
                        <input type="email" name="email" id="email" placeholder="Enter Email" required>
                    </div>
                </div>
                <div class="input-group">
                    <label for="phone">Phone No.</label>
                    <input type="text" name="phone_number" id="phone" placeholder="Enter phone no.">
                </div>
                <div class="input-group">
                    <label for="alt_phone">Alt. Phone No.</label>
                    <input type="text" name="alt_phone_number" id="alt_phone" placeholder="Enter alt. phone no.">
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label for="password">Password</label>
                        <input type="password" name="password" id="password" placeholder="Enter Password" required>
                    </div>
                </div>
                <div class="input-group">
                    <label for="aadhar_number">Aadhar No.</label>
                    <input type="text" name="aadhar_number" id="aadhar_number" placeholder="Enter Aadhar No." required>
                </div>
                <div class="buttons">
                    <button type="submit" class="save-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

        <!--content current page of total employee-->
        <div class="content current_page_action hidden"  data-page-name="total_employee">
            <h3>&nbsp;Total Employee</h3>
            <div class="container">
                <div class="header">
                      <button class="add-button">Add +</button>
                </div>

            </div>
        </div>

        <!--content current page of card sales-->
        <div class="content current_page_action hidden"  data-page-name="sales">
            <h3>&nbsp;Sales</h3>

        </div>
 
        <!--content current page of  card sales-->
        <div class="content current_page_action hidden"  data-page-name="admin">
            <h3>&nbsp;Admin</h3>

        </div>

        <!-- Manage Students -->
        <div class="content current_page_action hidden" data-page-name="manage_student">
            <h3>&nbsp;Students / Manage Students</h3>
            <div class="container">
                <div class="header">
                    <input type="text" id="search-student" placeholder="Search by Name or Email..." onkeyup="filterStudents()">
                    <button class="add-button" data-page-name="add_student" onclick="setActive(this)">Add +</button>
                </div>
                <table id="student-table">
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th class="student-name">Username</th>
                            <th class="student-email">Email</th>
                            <th>Domain</th>
                            <th>Subject</th>
                            <th>Date</th>
                            <th>Payment</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for student in students %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td class="student-name">{{ student.username }}</td>
                            <td class="student-email">{{ student.email }}</td>
                            <td>{{ student.domain.category_name }}</td>
                            <td>{{ student.subject.subject_name }}</td>
                            <td>{{ student.date }}</td>
                            <td>{{ student.payment }}</td>
                            <td>
                                <button class="edit-btn" 
                                    onclick="editStudent(
                                        {{ student.id }},
                                        '{{ student.username|escapejs }}',
                                        '{{ student.email|escapejs }}',
                                        '{{ student.domain.category_name|escapejs }}',
                                        '{{ student.subject.subject_name|escapejs }}',
                                        '{{ student.date|escapejs }}',
                                        '{{ student.payment|escapejs }}'
                                    )">
                                    Edit
                                </button>
                                <form method="POST" action="{% url 'delete_student' student.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="delete-btn" 
                                        onclick="return confirm('Are you sure you want to delete {{ student.username }}?')">
                                        Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="8" style="text-align: center;">No students found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add Student Section -->
        <div class="content current_page_action hidden" data-page-name="add_student">
            <h3>&nbsp;Students / Add Student</h3>
            <div class="container">
                <div class="title">Manage Students</div>
                <form method="POST" action="{% url 'add_student' %}">
                    {% csrf_token %}
                    <input type="hidden" name="student_id" id="student_id">
                    <div class="form-row">
                        <div class="input-group">
                            <label for="username">Student Name</label>
                            <input type="text" id="username" name="username" placeholder="Enter Student Name" required>
                        </div>
                        <div class="input-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" placeholder="Enter Email" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="input-group">
                            <label for="phone_number">Phone No.</label>
                            <input type="text" id="phone_number" name="phone_number" placeholder="Enter phone no.">
                        </div>
                        <div class="input-group">
                            <label for="alt_phone_number">Alt. Phone No.</label>
                            <input type="text" id="alt_phone_number" name="alt_phone_number" placeholder="Enter alt. phone no.">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="input-group">
                            <label for="domain">Domain</label>
                            <select id="domain" name="domain" required>
                                <option value="" disabled selected>Select Domain</option>
                                {% for category in categories %}
                                <option value="{{ category.id }}">{{ category.category_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="subject">Subject</label>
                            <select id="subject" name="subject" required>
                                <option value="" disabled selected>Select Subject</option>
                                {% for subject in subjects %}
                                <option value="{{ subject.id }}">{{ subject.subject_name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="input-group">
                            <label for="date">Date</label>
                            <input type="date" id="date" name="date" required>
                        </div>
                        <div class="input-group">
                            <label for="payment">Payment</label>
                            <input type="text" id="payment" name="payment" value="INR 999" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="input-group">
                            <label for="password">Password</label>
                            <input type="password" name="password" id="password" placeholder="Enter Password" required>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="aadhar_number">Aadhar No.</label>
                        <input type="text" name="aadhar_number" id="aadhar_number" placeholder="Enter Aadhar No." required>
                    </div>
                    <div class="buttons">
                        <button type="submit" class="save-btn">Save</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Manage Manager -->
        <div class="content current_page_action hidden" data-page-name="manage_manager">
            <h3>&nbsp;Manager / Manage Manager</h3>
            <div class="container">
                <div class="header">
                    <input type="text" id="managerSearch" placeholder="Search by Name or Email..." onkeyup="filterManagers()">
                    <button class="add-button" data-page-name="add_manager" onclick="setActive(this)">Add +</button>
                </div>
                <table id="managerTable">
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>User Name</th>
                            <th>Full Name</th>
                            <th>Email</th>
                            <th>Phone No.</th>
                            <th>Alt. Phone No.</th>
                            <th>Password</th>
                            <th>Aadhar No.</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for manager in managers %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td class="manager-name">{{ manager.username }}</td>
                            <td>{{ manager.full_name }}</td>
                            <td class="manager-email">{{ manager.email }}</td>
                            <td>{{ manager.phone_number }}</td>
                            <td>{{ manager.alt_phone_number }}</td>
                            <td>{{ manager.password }}</td>
                            <td>{{ manager.aadhar_number }}</td>
                            <td>
                                <button class="edit-btn" onclick="editManager({{ manager.id }}, '{{ manager.full_name }}', '{{ manager.email }}', '{{ manager.phone_number }}', '{{ manager.alt_phone_number }}', '{{ manager.password }}', '{{ manager.aadhar_number }}')">Edit</button>
                                <form method="POST" action="{% url 'delete_manager' manager.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this manager?')">Delete</button>
                                </form>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="9" style="text-align: center;">No managers found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>


        <!-- Add/Edit Manager -->
        <div class="content current_page_action hidden" data-page-name="add_manager">
            <h3>&nbsp;Manager/Add Manager</h3>
            <div class="container">
                <div class="title">Manage Manager</div>
                <form method="POST" action="{% url 'add_manager' %}">
                    {% csrf_token %}
                    <input type="hidden" name="manager_id" id="manager_id">
                    <div class="form-row">
                        <div class="input-group">
                            <label for="manager_full_name">Full Name</label>
                            <input type="text" name="full_name" id="manager_full_name" placeholder="Enter Full Name" required>
                        </div>
                        <div class="input-group">
                            <label for="manager_email">Email</label>
                            <input type="email" name="email" id="manager_email" placeholder="Enter Email" required>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="manager_phone">Phone No.</label>
                        <input type="text" name="phone_number" id="manager_phone" placeholder="Enter phone no.">
                    </div>
                    <div class="input-group">
                        <label for="manager_alt_phone">Alt. Phone No.</label>
                        <input type="text" name="alt_phone_number" id="manager_alt_phone" placeholder="Enter alt. phone no.">
                    </div>
                    <div class="form-row">
                        <div class="input-group">
                            <label for="manager_password">Password</label>
                            <input type="password" name="password" id="manager_password" placeholder="Enter Password" required>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="manager_aadhar_number">Aadhar No.</label>
                        <input type="text" name="aadhar_number" id="manager_aadhar_number" placeholder="Enter Aadhar No." required>
                    </div>
                    <div class="buttons">
                        <button type="submit" class="save-btn">Save</button>
                    </div>
                </form>
            </div>
        </div>
       
        <!-- Manage Employee -->
        <div class="content current_page_action hidden" data-page-name="manage_employee">
            <h3>&nbsp;Employee / Manage Employee</h3>

            <!-- Search Bar for Employee Name or Email -->
            <div class="container">
                <div class="header">
                    <input type="text" id="employeeSearch" placeholder="Search Employee by Name or Email..." onkeyup="filterEmployees()">
                    <button class="add-button" data-page-name="add_employee" onclick="setActive(this)">Add +</button>
                </div>

                <table id="employeeTable">
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>User Name</th>
                            <th class="employee-name">Full Name</th>
                            <th class="employee-email">Email</th>
                            <th>Phone No.</th>
                            <th>Alt. Phone No.</th>
                            <th>Password</th>
                            <th>Aadhar No.</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for employee in employees %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ employee.username }}</td>
                            <td class="employee-name">{{ employee.full_name }}</td>
                            <td class="employee-email">{{ employee.email }}</td>
                            <td>{{ employee.phone_number }}</td>
                            <td>{{ employee.alt_phone_number }}</td>
                            <td>{{ employee.password }}</td>
                            <td>{{ employee.aadhar_number }}</td>
                            <td>
                                <button class="edit-btn" 
                                    onclick="editEmployee(
                                        {{ employee.id }}, 
                                        '{{ employee.full_name|escapejs }}', 
                                        '{{ employee.email|escapejs }}', 
                                        '{{ employee.phone_number|escapejs }}', 
                                        '{{ employee.alt_phone_number|escapejs }}', 
                                        '{{ employee.password|escapejs }}', 
                                        '{{ employee.aadhar_number|escapejs }}'
                                    )">
                                    Edit
                                </button>
                                <form method="POST" action="{% url 'delete_employee' employee.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this employee?')">Delete</button>
                                </form>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="9" style="text-align: center;">No employees found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add Employee Section -->
        <div class="content current_page_action hidden" data-page-name="add_employee">
            <h3>&nbsp;Employee / Add Employee</h3>
            <div class="container">
                <div class="title">Manage Employees</div>
                <form method="POST" action="{% url 'add_employee' %}">
                    {% csrf_token %}
                    
                    <!-- Hidden field for updating an employee (if applicable) -->
                    <input type="hidden" id="employee_id" name="employee_id">

                    <div class="form-row">
                        <div class="input-group">
                            <label for="full_name">Full Name</label>
                            <input type="text" id="full_name" name="full_name" placeholder="Enter Full Name" required>
                        </div>
                        <div class="input-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" placeholder="Enter Email" required>
                        </div>
                        <div class="input-group">
                            <label for="phone_number">Phone Number</label>
                            <input type="text" id="phone_number" name="phone_number" placeholder="Enter Phone Number" required>
                        </div>
                        <div class="input-group">
                            <label for="alt_phone_number">Alt. Phone Number</label>
                            <input type="text" id="alt_phone_number" name="alt_phone_number" placeholder="Enter Alternate Phone Number">
                        </div>
                        <div class="input-group">
                            <label for="aadhar_number">Aadhar Number</label>
                            <input type="text" id="aadhar_number" name="aadhar_number" placeholder="Enter Aadhar Number" required>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button type="submit" class="save-btn">Save</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Manage User -->
        <div class="content current_page_action hidden" data-page-name="manage_user">
            <h3>&nbsp;User / Manage Users</h3>
            <div class="container">
                <div class="header">
                    <input type="text" id="search-user" placeholder="Search by Name or Email..." onkeyup="filterUsers()">
                    <button class="add-button" data-page-name="add_user" onclick="setActive(this)">Add +</button>
                </div>
                <table id="user-table">
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Username</th>
                            <th class="user-name">Full Name</th>
                            <th class="user-email">Email</th>
                            <th>Phone No.</th>
                            <th>College Name</th>
                            <th>Date of Birth</th>
                            <th>Referral Code</th>
                            <th>Last Login</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ user.username }}</td>
                            <td class="user-name">{{ user.full_name }}</td>
                            <td class="user-email">{{ user.email }}</td>
                            <td>{{ user.phone_number }}</td>
                            <td>{{ user.college_name }}</td>
                            <td>{{ user.dob }}</td>
                            <td>{{ user.referral_code|default:"N/A" }}</td>
                            <td>{{ user.last_login|default:"Never" }}</td>
                            <td>
                                <button class="edit-btn" 
                                    onclick="editUser(
                                        {{ user.id }}, 
                                        '{{ user.full_name|escapejs }}', 
                                        '{{ user.email|escapejs }}', 
                                        '{{ user.phone_number|escapejs }}', 
                                        '{{ user.college_name|escapejs }}', 
                                        '{{ user.dob }}', 
                                        '{{ user.referral_code|escapejs }}'
                                    )">
                                    Edit
                                </button>
                                <form method="POST" action="{% url 'delete_user' user.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="delete-btn" 
                                        onclick="return confirm('Are you sure you want to delete {{ user.full_name }}?')">
                                        Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="10" style="text-align: center;">No users found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add User Section -->
        <div class="content current_page_action hidden" data-page-name="add_user">
            <h3>&nbsp;User / Add User</h3>
            <div class="container">
                <div class="title">Manage Users</div>
                <form method="POST" action="{% url 'add_user' %}">
                    {% csrf_token %}

                    <!-- Hidden field for editing -->
                    <input type="hidden" id="user_id" name="user_id">

                    <div class="form-row">
                        <div class="input-group">
                            <label for="full_name">Full Name</label>
                            <input type="text" name="full_name" id="full_name" placeholder="Enter Full Name" required>
                        </div>
                        <div class="input-group">
                            <label for="email">Email</label>
                            <input type="email" name="email" id="email" placeholder="Enter Email" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-group">
                            <label for="phone_number">Phone No.</label>
                            <input type="text" name="phone_number" id="phone_number" placeholder="Enter Phone No.">
                        </div>
                        <div class="input-group">
                            <label for="college_name">College Name</label>
                            <input type="text" name="college_name" id="college_name" placeholder="Enter College Name">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-group">
                            <label for="dob">Date of Birth</label>
                            <input type="date" name="dob" id="dob" required>
                        </div>
                        <div class="input-group">
                            <label for="password">Password</label>
                            <input type="password" name="password" id="password" placeholder="Enter Password" required>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="referral_code">Referral Code</label>
                        <input type="text" name="referral_code" id="referral_code" placeholder="Enter Referral Code (Optional)">
                    </div>

                    <div class="buttons">
                        <button type="submit" class="save-btn">Save</button>
                    </div>
                </form>
            </div>
        </div>


        <!-- Manage College -->
        <div class="content current_page_action hidden" data-page-name="manage_college">
            <h3>&nbsp;College / Manage College</h3>
            
            <!-- Search Bar for College Name -->
            <div class="container">
                <div class="header">
                    <input type="text" id="collegeSearch" placeholder="Search College by Name..." onkeyup="filterColleges()">
                    <button class="add-button" data-page-name="add_college" onclick="setActive(this)">Add +</button>
                </div>

                <table id="collegeTable">
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>College Name</th>
                            <th>Location</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for college in colleges %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td class="college-name">{{ college.college_name }}</td>
                            <td>{{ college.college_location }}</td>
                            <td>
                                <button class="edit-btn" 
                                    onclick="editCollege(
                                        {{ college.id }}, 
                                        '{{ college.college_name|escapejs }}', 
                                        '{{ college.college_location|escapejs }}'
                                    )">
                                    Edit
                                </button>
                                <form method="POST" action="{% url 'delete_college' college.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="delete-btn" 
                                        onclick="return confirm('Are you sure you want to delete {{ college.college_name|escapejs }}?')">
                                        Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="4" style="text-align: center;">No colleges found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add College Section -->
        <div class="content current_page_action hidden" data-page-name="add_college">
            <h3>&nbsp;College / Add College</h3>
            <div class="container">
                <div class="title">Manage Colleges</div>
                <form method="POST" action="{% url 'add_college' %}">
                    {% csrf_token %}
                    
                    <!-- Hidden field for updating a college (if applicable) -->
                    <input type="hidden" id="college_id" name="college_id">

                    <div class="form-row">
                        <div class="input-group">
                            <label for="college_name">College Name</label>
                            <input type="text" id="college_name" name="college_name" placeholder="Enter College Name" required>
                        </div>
                        <div class="input-group">
                            <label for="college_location">Location</label>
                            <input type="text" id="college_location" name="college_location" placeholder="Enter Location" required>
                        </div>
                    </div>
                    
                    <div class="buttons">
                        <button type="submit" class="save-btn">Save</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Manage Questions Section -->
        <div class="content current_page_action {% if current_page == 'manage_question' %}show{% else %}hidden{% endif %}" data-page-name="manage_question">
            <h3>&nbsp;Questions / Manage Questions</h3>
            <div class="container">


                <!-- List of Questions -->
                <table>
                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Question Code</th>
                            <th>Question</th>
                            <th>Subject</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for question in questions %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ question.question_code }}</td>
                            <td>{{ question.question_text|truncatechars:50 }}</td>
                            <td>{{ question.question_subject.subject_name }}</td>
                            <td>
                                <button class="edit-btn" onclick="editQuestion({{ question.id }}, '{{ question.question_text|escapejs }}', '{{ question.question_subject.id }}')">Edit</button>
                                <form method="POST" action="{% url 'delete_question' question.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this question?')">Delete</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>


        <!-- Add Question Section -->
        <div class="content current_page_action hidden" data-page-name="add_question">
            <h3>&nbsp;Questions / Add Question</h3>
            <div class="container">
                <div class="title">Manage Questions</div>
                <!-- Add/Edit Question Form -->
                <form method="POST" action="{% url 'manage_questions' %}">
                    {% csrf_token %}
                    <input type="hidden" name="question_id" id="question_id" value="{{ question.id|default:'' }}">

                    <div class="form-row">
                        <div class="input-group">
                            <label for="category">Category</label>
                            <select id="category" name="category" required onchange="loadSubjects()">
                                <option value="" disabled selected>Select Category</option>
                                {% for category in categories %}
                                <option value="{{ category.id }}" {% if question and question.question_subject.subject_category.id == category.id %}selected{% endif %}>
                                    {{ category.category_name }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="subject">Subject</label>
                            <select id="subject" name="question_subject" required>
                                <option value="" disabled selected>Select Subject</option>
                                {% for subject in subjects %}
                                <option value="{{ subject.id }}" {% if question and question.question_subject.id == subject.id %}selected{% endif %}>
                                    {{ subject.subject_name }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-group">
                            <label for="question_text">Question</label>
                            <textarea id="question_text" name="question_text" placeholder="Enter Question" required>{{ question.question_text|default:'' }}</textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-group">
                            <label for="option_A">Option A</label>
                            <input type="text" id="option_A" name="option_A" placeholder="Enter Option A" required value="{{ question.answers.option_A.text|default:'' }}">
                        </div>
                        <div class="input-group">
                            <label for="option_B">Option B</label>
                            <input type="text" id="option_B" name="option_B" placeholder="Enter Option B" required value="{{ question.answers.option_B.text|default:'' }}">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-group">
                            <label for="option_C">Option C</label>
                            <input type="text" id="option_C" name="option_C" placeholder="Enter Option C" required value="{{ question.answers.option_C.text|default:'' }}">
                        </div>
                        <div class="input-group">
                            <label for="option_D">Option D</label>
                            <input type="text" id="option_D" name="option_D" placeholder="Enter Option D" required value="{{ question.answers.option_D.text|default:'' }}">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-group">
                            <label for="correct_answer">Correct Answer</label>
                            <select id="correct_answer" name="correct_answer" required>
                                <option value="" disabled selected>Select Correct Answer</option>
                                <option value="A" {% if question and question.answers.option_A.is_correct %}selected{% endif %}>A</option>
                                <option value="B" {% if question and question.answers.option_B.is_correct %}selected{% endif %}>B</option>
                                <option value="C" {% if question and question.answers.option_C.is_correct %}selected{% endif %}>C</option>
                                <option value="D" {% if question and question.answers.option_D.is_correct %}selected{% endif %}>D</option>
                            </select>
                        </div>
                    </div>

                    <div class="buttons">
                        <button type="submit" class="save-btn">Save</button>
                    </div>
                </form>
            </div>
        </div>
            
        </div>
    </div>
    
    <script>    
        
        document.addEventListener('DOMContentLoaded', () => {
            // Adding click event listeners to cards
            const cards = document.querySelectorAll('.card');
        
            cards.forEach(card => {
                card.addEventListener('click', () => {
                    const pageName = card.getAttribute('data-page-name');
                    if (pageName) {
                        setActive(card); // Set active class and handle page display
                    }
                });
            });
        });
        
        function toggleDropdown(id, element) {
            var menu = document.getElementById(id);
            menu.style.display = (menu.style.display === "block") ? "none" : "block";
            setActive(element, 0);
            let icon = element.querySelector('.icon_toggle');
            if (icon.classList.contains('fa-chevron-right')) {
                icon.classList.remove('fa-chevron-right');
                icon.classList.add('fa-chevron-down');
            } else {
                icon.classList.add('fa-chevron-right');
                icon.classList.remove('fa-chevron-down');
            }
        }
        
        function toggleSelectAll() {
            let selectAllCheckbox = document.getElementById("select_all");
            let checkboxes = document.querySelectorAll(".select_certificate");
            checkboxes.forEach(cb => cb.checked = selectAllCheckbox.checked);
        }

        function setActive(element, call_type = 1) {
            // Remove 'active' class from all list items and cards
            document.querySelectorAll('.sidebar ul li, .dropdown-menu li, .card').forEach(el => {
                el.classList.remove('active', 'hover_sidebar_color');
            });
        
            // Add 'active' and 'hover_sidebar_color' classes to the clicked element
            element.classList.add('active', 'hover_sidebar_color');
        
            if (call_type === 1) {
                const pages_elements = document.querySelectorAll(".current_page_action");
                pages_elements.forEach(e => {
                    if (e.getAttribute("data-page-name") === element.getAttribute("data-page-name")) {
                        e.classList.add('show');
                        e.classList.remove('hidden');
                    } else {
                        e.classList.add('hidden');
                        e.classList.remove('show');
                    }
                });
            }
        }

        function openAdminForm() {
            document.querySelector('[data-page-name="manage_admin"]').classList.add('hidden');
            document.querySelector('[data-page-name="add_admin"]').classList.remove('hidden');
        }
        
        function toggleSelectAll(source) {
            let checkboxes = document.querySelectorAll('.row-checkbox');
            checkboxes.forEach(checkbox => checkbox.checked = source.checked);
        }

        function editAdmin(id, fullName, email, phone, altPhone, password, aadhar) {
            document.getElementById('admin_id').value = id;
            document.getElementById('full_name').value = fullName;
            document.getElementById('email').value = email;
            document.getElementById('phone').value = phone;
            document.getElementById('alt_phone').value = altPhone;
            document.getElementById('password').value = password;
            document.getElementById('aadhar_number').value = aadhar;
    
            setActive(document.querySelector('[data-page-name="add_admin"]'));
        }
        
        function editManager(id, fullName, email, phone, altPhone, password, aadhar) {
            document.getElementById('manager_id').value = id;
            document.getElementById('manager_full_name').value = fullName;
            document.getElementById('manager_email').value = email;
            document.getElementById('manager_phone').value = phone;
            document.getElementById('manager_alt_phone').value = altPhone;
            document.getElementById('manager_password').value = password;
            document.getElementById('manager_aadhar_number').value = aadhar;
        
            setActive(document.querySelector('[data-page-name="add_manager"]'));
        }

        function openManagerForm() {
            document.querySelector('[data-page-name="manage_manager"]').classList.add('hidden');
            document.querySelector('[data-page-name="add_manager"]').classList.remove('hidden');
        }

        function editEmployee(id, fullName, email, phone, altPhone, password, aadhar) {
            document.getElementById('employee_id').value = id;
            document.getElementById('employee_full_name').value = fullName;
            document.getElementById('employee_email').value = email;
            document.getElementById('employee_phone').value = phone;
            document.getElementById('employee_alt_phone').value = altPhone;
            document.getElementById('employee_password').value = password;
            document.getElementById('employee_aadhar_number').value = aadhar;
        
            setActive(document.querySelector('[data-page-name="add_employee"]'));
        }

        function openEmployeeForm() {
            document.querySelector('[data-page-name="manage_employee"]').classList.add('hidden');
            document.querySelector('[data-page-name="add_employee"]').classList.remove('hidden');
        }

        function editCollege(id, name, location) {
            document.getElementById("college_id").value = id;
            document.getElementById("college_name").value = name;
            document.getElementById("college_location").value = location;
            setActive(document.querySelector('[data-page-name="add_college"]'));
        }

        function editUser(id, fullName, email, phoneNumber, collegeName, dob, referralCode) {
            document.getElementById("user_id").value = id;
            document.getElementById("full_name").value = fullName;
            document.getElementById("email").value = email;
            document.getElementById("phone_number").value = phoneNumber;
            document.getElementById("college_name").value = collegeName;
            document.getElementById("dob").value = dob;
            document.getElementById("referral_code").value = referralCode;
            setActive(document.querySelector('[data-page-name="add_user"]'));
        }

        function editStudent(id, username, email, domainId, subjectId, date, payment) {
            document.getElementById('student_id').value = id;
            document.getElementById('username').value = username;
            document.getElementById('email').value = email;
            document.getElementById('domain').value = domainId;
            document.getElementById('subject').value = subjectId;
            document.getElementById('date').value = date;
            document.getElementById('payment').value = payment;
        
            setActive(document.querySelector('[data-page-name="add_student"]'));
        }
        
        function openStudentForm() {
            document.querySelector('[data-page-name="manage_student"]').classList.add('hidden');
            document.querySelector('[data-page-name="add_student"]').classList.remove('hidden');
        }

        function filterSubjects() {
            var categoryId = document.getElementById("category").value;
            var subjects = document.getElementById("question_subject").options;
    
            for (var i = 0; i < subjects.length; i++) {
                var subjectCategory = subjects[i].getAttribute("data-category");
                subjects[i].style.display = subjectCategory === categoryId || subjectCategory === null ? "block" : "none";
            }
        }

        function loadSubjects() {
            var selectedCategory = document.getElementById("category").value;
            var subjectDropdown = document.getElementById("question_subject");
            subjectDropdown.innerHTML = '<option value="" disabled selected>Select Subject</option>';
    
            document.querySelectorAll("#question_subject option[data-category]").forEach(option => {
                if (option.getAttribute("data-category") === selectedCategory) {
                    subjectDropdown.appendChild(option.cloneNode(true));
                }
            });
        }

        function editQuestion(id, questionText, subjectId) {
            document.getElementById('question_id').value = id;
            document.getElementById('question_text').value = questionText;
            document.getElementById('question_subject').value = subjectId;
        
            setActive(document.querySelector('[data-page-name="add_question"]'));
        }

        function loadSubjects() {
            var selectedCategory = document.getElementById("category").value;
            var subjectDropdown = document.getElementById("subject");
            subjectDropdown.innerHTML = '<option value="" disabled selected>Select Subject</option>';
        
            // Fetch subjects for the selected category
            fetch(`/get-subjects/?category_id=${selectedCategory}`)
                .then(response => response.json())
                .then(data => {
                    data.subjects.forEach(subject => {
                        var option = document.createElement("option");
                        option.value = subject.id;
                        option.text = subject.subject_name;
                        subjectDropdown.appendChild(option);
                    });
                });
        }

            // Get the URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const page = urlParams.get('page');

    // Show the Manage College section if the 'page' param is 'manage_college'
    if (page === 'manage_college') {
        document.querySelector('[data-page-name="manage_college"]').classList.add('active');
        document.querySelector('[data-page-name="manage_college"]').click();
    }

        function filterColleges() {
            var input = document.getElementById("collegeSearch");
            var filter = input.value.toLowerCase();
            var table = document.getElementById("collegeTable");
            var rows = table.getElementsByTagName("tr");

            for (var i = 1; i < rows.length; i++) { // Start from 1 to skip the header row
                var collegeNameCell = rows[i].getElementsByClassName("college-name")[0];
                if (collegeNameCell) {
                    var txtValue = collegeNameCell.textContent || collegeNameCell.innerText;
                    if (txtValue.toLowerCase().indexOf(filter) > -1) {
                        rows[i].style.display = "";
                    } else {
                        rows[i].style.display = "none";
                    }
                }
            }
        }

            // Show the Manage College section if the 'page' param is 'manage_college'
    if (page === 'manage_admin') {
        document.querySelector('[data-page-name="manage_admin"]').classList.add('active');
        document.querySelector('[data-page-name="manage_admin"]').click();
    }

    function filterAdmins() {
        let input = document.getElementById("search-admin").value.toLowerCase();
        let table = document.getElementById("admin-table");
        let rows = table.getElementsByTagName("tr");

        for (let i = 1; i < rows.length; i++) {
            let name = rows[i].getElementsByClassName("admin-name")[0]?.textContent.toLowerCase() || "";
            let email = rows[i].getElementsByClassName("admin-email")[0]?.textContent.toLowerCase() || "";

            rows[i].style.display = (name.includes(input) || email.includes(input)) ? "" : "none";
        }
    }

                    // Show the Manage College section if the 'page' param is 'manage_college'
    if (page === 'manage_manager') {
        document.querySelector('[data-page-name="manage_manager"]').classList.add('active');
        document.querySelector('[data-page-name="manage_manager"]').click();
    }

        function filterManagers() {
            let input = document.getElementById("managerSearch").value.toLowerCase();
            let table = document.getElementById("managerTable");
            let rows = table.getElementsByTagName("tr");
            
            for (let i = 1; i < rows.length; i++) {
                let name = rows[i].getElementsByClassName("manager-name")[0]?.textContent.toLowerCase() || "";
                let email = rows[i].getElementsByClassName("manager-email")[0]?.textContent.toLowerCase() || "";
                
                rows[i].style.display = (name.includes(input) || email.includes(input)) ? "" : "none";
            }
        }
        
        if (page === 'manage_employee') {
            document.querySelector('[data-page-name="manage_employee"]').classList.add('active');
            document.querySelector('[data-page-name="manage_employee"]').click();
        }
        
        function filterEmployees() {
            let input = document.getElementById("employeeSearch").value.toLowerCase();
            let table = document.getElementById("employeeTable");
            let rows = table.getElementsByTagName("tr");
            
            for (let i = 1; i < rows.length; i++) {
                let name = rows[i].getElementsByClassName("employee-name")[0]?.textContent.toLowerCase() || "";
                let email = rows[i].getElementsByClassName("employee-email")[0]?.textContent.toLowerCase() || "";
                
                rows[i].style.display = (name.includes(input) || email.includes(input)) ? "" : "none";
            }
        }

        if (page === 'manage_user') {
            document.querySelector('[data-page-name="manage_user"]').classList.add('active');
            document.querySelector('[data-page-name="manage_user"]').click();
        }

        function filterUsers() {
            let input = document.getElementById("search-user").value.toLowerCase();
            let table = document.getElementById("user-table");
            let rows = table.getElementsByTagName("tr");
    
            for (let i = 1; i < rows.length; i++) {
                let name = rows[i].getElementsByClassName("user-name")[0]?.textContent.toLowerCase() || "";
                let email = rows[i].getElementsByClassName("user-email")[0]?.textContent.toLowerCase() || "";
    
                rows[i].style.display = (name.includes(input) || email.includes(input)) ? "" : "none";
            }
        }

        if (page === 'manage_student') {
            document.querySelector('[data-page-name="manage_student"]').classList.add('active');
            document.querySelector('[data-page-name="manage_student"]').click();
        }

        function filterStudents() {
            let input = document.getElementById("search-student").value.toLowerCase();
            let table = document.getElementById("student-table");
            let rows = table.getElementsByTagName("tr");
    
            for (let i = 1; i < rows.length; i++) {
                let name = rows[i].getElementsByClassName("student-name")[0]?.textContent.toLowerCase() || "";
                let email = rows[i].getElementsByClassName("student-email")[0]?.textContent.toLowerCase() || "";
    
                rows[i].style.display = (name.includes(input) || email.includes(input)) ? "" : "none";
            }
        }
        
    </script>
</body>
</html>